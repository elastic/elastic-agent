receivers:
  metricbeatreceiver:
    metricbeat:
      modules:
        # Metrics
        - module: autoops_es
          hosts: ${env:AUTOOPS_ES_URL}
          period: 10s
          metricsets:
            - cat_shards
            - node_stats
            - tasks_management
        # Less Frequent Metrics
        - module: autoops_es
          hosts: ${env:AUTOOPS_ES_URL}
          period: 1m
          metricsets:
            - cluster_health
            - cluster_settings
        # Templates and License Details
        - module: autoops_es
          hosts: ${env:AUTOOPS_ES_URL}
          period: 24h
          metricsets:
            - cat_template
            - component_template
            - index_template
            - license
    processors:
      - add_fields:
          target: autoops_es
          fields:
            temp_resource_id: ${env:AUTOOPS_TEMP_RESOURCE_ID}
            token: ${env:AUTOOPS_TOKEN}
    telemetry_types: ["logs"]

exporters:
  # Exporter to print the first 5 logs/metrics and then every 1000th
  debug:
    verbosity: detailed
    sampling_initial: 5
    sampling_thereafter: 1000

service:
  pipelines:
    logs:
      receivers: [metricbeatreceiver]
      exporters: [debug]
  telemetry:
    logs:
      encoding: json
