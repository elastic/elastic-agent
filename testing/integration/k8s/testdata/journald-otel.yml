receivers:
  filebeatreceiver:
    filebeat:
      inputs:
        - type: journald
          id: journald-input
          paths:
            - /opt/journal/
          merge: true

    logging:
      level: debug
      selectors:
        - '*'

processors:
  resource:
    attributes:
    - key: data_stream.namespace
      action: insert
      value: "${EA_POLICY_NAMESPACE}"

exporters:
  elasticsearch:
    logs_index: "${EA_POLICY_NAMESPACE}"
    endpoint: "${ES_HOST}"
    api_key: "${ES_API_KEY_ENCODED}"

service:
  pipelines:
    logs:
      receivers: [filebeatreceiver]
      processors: [resource]
      exporters:
        - elasticsearch
  telemetry:
    logs:
      level: DEBUG
      encoding: json
      disable_stacktrace: true
