# yaml-language-server: $schema=https://raw.githubusercontent.com/buildkite/pipeline-schema/main/schema.json

env:
  VAULT_PATH: "kv/ci-shared/observability-ingest/cloud/gcp"
  DOCKER_REGISTRY: "docker.elastic.co"
steps:

  - label: "DRA"
    trigger: "elastic-agent-package"
    build:
      commit: "${BUILDKITE_COMMIT}"
      branch: "test/golang-crossbuild-533"
      env:
        MANIFEST_URL: "https://snapshots.elastic.co/9.1.0-b04c6596/agent-package/agent-artifacts-9.1.0-SNAPSHOT.json"
        DRA_VERSION: "9.1.0"
        DRA_WORKFLOW: "snapshot"
        BUILDKITE_BRANCH: "main"
        DRA_BRANCH: "main"


  - label: "DRA staging"
    trigger: "elastic-agent-package"
    build:
      commit: "${BUILDKITE_COMMIT}"
      branch: "test/golang-crossbuild-533"
      env:
        MANIFEST_URL: "https://snapshots.elastic.co/9.1.0-b04c6596/agent-package/agent-artifacts-9.1.0-SNAPSHOT.json"
        DRA_VERSION: "9.1.0"
        BUILDKITE_BRANCH: "main"
        DRA_BRANCH: "main"
