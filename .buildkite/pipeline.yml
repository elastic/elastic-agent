# yaml-language-server: $schema=https://raw.githubusercontent.com/buildkite/pipeline-schema/main/schema.json

env:
  VAULT_PATH: "kv/ci-shared/observability-ingest/cloud/gcp"
  DOCKER_REGISTRY: "docker.elastic.co"
  ELASTIC_SLACK_NOTIFICATIONS_ENABLED: 'true' 
  SLACK_NOTIFICATIONS_CHANNEL: '#ingest-notifications' 
  SLACK_NOTIFICATIONS_ALL_BRANCHES: 'false' 
  SLACK_NOTIFICATIONS_ON_SUCCESS: 'false'
steps:
  - label: "Integration tests"
    key: "integration-tests"
    command: ".buildkite/scripts/integration_tests.sh"
    branches: "main"
    artifact_paths:
      - "build/TEST-**"
    agents:
      provider: "gcp"

