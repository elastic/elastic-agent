# yaml-language-server: $schema=https://raw.githubusercontent.com/buildkite/pipeline-schema/main/schema.json

# Integration tests pipeline - dynamically generated from Go code.
# See: dev-tools/buildkite/pipelines/integration_pipeline.go
env:
  IMAGE_UBUNTU_2404_X86_64: "platform-ingest-elastic-agent-ubuntu-2404-1762801856"

steps:
  - label: ":pipeline: Upload pipeline"
    command: |
      source .buildkite/scripts/common.sh
      mage buildkite:integration | buildkite-agent pipeline upload
    agents:
      provider: "gcp"
      image: "${IMAGE_UBUNTU_2204_X86_64}"
